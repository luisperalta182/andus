{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["ALLOWED_BLOCKS","LAYOUT","type","alignments","getComputedStyle","node","ownerDocument","defaultView","detectColors","colorsDetectionElement","setColor","setBackground","color","backgroundColorNode","backgroundColor","parentNode","nodeType","ELEMENT_NODE","Navigation","selectedBlockHasDescendants","attributes","setAttributes","clientId","hasExistingNavItems","isImmediateParentOfSelectedBlock","isSelected","updateInnerBlocks","className","setBackgroundColor","textColor","setTextColor","overlayBackgroundColor","setOverlayBackgroundColor","overlayTextColor","setOverlayTextColor","hasSubmenuIndicatorSetting","hasItemJustificationControls","hasColorSettings","isPlaceholderShown","setIsPlaceholderShown","isResponsiveMenuOpen","setResponsiveMenuVisibility","selectBlock","blockEditorStore","navRef","blockProps","ref","itemsJustification","orientation","isResponsive","class","slug","style","navigatorToolbarButton","navigatorModal","placeholder","innerBlocksProps","allowedBlocks","renderAppender","InnerBlocks","DefaultAppender","__experimentalCaptureToolbars","templateLock","__experimentalLayout","enableContrastChecking","Platform","OS","detectedBackgroundColor","setDetectedBackgroundColor","detectedColor","setDetectedColor","detectedOverlayBackgroundColor","setDetectedOverlayBackgroundColor","detectedOverlayColor","setDetectedOverlayColor","current","subMenuElement","querySelector","blocks","selectNavigationBlock","justifyAllowedControls","value","position","isAlternate","showSubmenuIcon","onChange","label","select","innerBlocks","getBlocks","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","selectedBlockId","length","dispatch","replaceInnerBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tPlatform,\n} from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\t__experimentalUseInnerBlocksProps as useInnerBlocksProps,\n\tInspectorControls,\n\tJustifyToolbar,\n\tBlockControls,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n\twithColors,\n\tPanelColorSettings,\n\tContrastChecker,\n\tgetColorClassName,\n} from '@wordpress/block-editor';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport { PanelBody, ToggleControl, ToolbarGroup } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\nimport NavigationPlaceholder from './placeholder';\nimport PlaceholderPreview from './placeholder-preview';\nimport ResponsiveWrapper from './responsive-wrapper';\n\nconst ALLOWED_BLOCKS = [\n\t'core/navigation-link',\n\t'core/search',\n\t'core/social-links',\n\t'core/page-list',\n\t'core/spacer',\n\t'core/home-link',\n];\n\nconst LAYOUT = {\n\ttype: 'default',\n\talignments: [],\n};\n\nfunction getComputedStyle( node ) {\n\treturn node.ownerDocument.defaultView.getComputedStyle( node );\n}\n\nfunction detectColors( colorsDetectionElement, setColor, setBackground ) {\n\tif ( ! colorsDetectionElement ) {\n\t\treturn;\n\t}\n\tsetColor( getComputedStyle( colorsDetectionElement ).color );\n\n\tlet backgroundColorNode = colorsDetectionElement;\n\tlet backgroundColor = getComputedStyle( backgroundColorNode )\n\t\t.backgroundColor;\n\twhile (\n\t\tbackgroundColor === 'rgba(0, 0, 0, 0)' &&\n\t\tbackgroundColorNode.parentNode &&\n\t\tbackgroundColorNode.parentNode.nodeType ===\n\t\t\tbackgroundColorNode.parentNode.ELEMENT_NODE\n\t) {\n\t\tbackgroundColorNode = backgroundColorNode.parentNode;\n\t\tbackgroundColor = getComputedStyle( backgroundColorNode )\n\t\t\t.backgroundColor;\n\t}\n\n\tsetBackground( backgroundColor );\n}\n\nfunction Navigation( {\n\tselectedBlockHasDescendants,\n\tattributes,\n\tsetAttributes,\n\tclientId,\n\thasExistingNavItems,\n\tisImmediateParentOfSelectedBlock,\n\tisSelected,\n\tupdateInnerBlocks,\n\tclassName,\n\tbackgroundColor,\n\tsetBackgroundColor,\n\ttextColor,\n\tsetTextColor,\n\toverlayBackgroundColor,\n\tsetOverlayBackgroundColor,\n\toverlayTextColor,\n\tsetOverlayTextColor,\n\thasSubmenuIndicatorSetting = true,\n\thasItemJustificationControls = true,\n\thasColorSettings = true,\n} ) {\n\tconst [ isPlaceholderShown, setIsPlaceholderShown ] = useState(\n\t\t! hasExistingNavItems\n\t);\n\tconst [ isResponsiveMenuOpen, setResponsiveMenuVisibility ] = useState(\n\t\tfalse\n\t);\n\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\tconst navRef = useRef();\n\n\tconst blockProps = useBlockProps( {\n\t\tref: navRef,\n\t\tclassName: classnames( className, {\n\t\t\t[ `items-justified-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t\t'is-vertical': attributes.orientation === 'vertical',\n\t\t\t'is-responsive': attributes.isResponsive,\n\t\t\t'has-text-color': !! textColor.color || !! textColor?.class,\n\t\t\t[ getColorClassName(\n\t\t\t\t'color',\n\t\t\t\ttextColor?.slug\n\t\t\t) ]: !! textColor?.slug,\n\t\t\t'has-background': !! backgroundColor.color || backgroundColor.class,\n\t\t\t[ getColorClassName(\n\t\t\t\t'background-color',\n\t\t\t\tbackgroundColor?.slug\n\t\t\t) ]: !! backgroundColor?.slug,\n\t\t} ),\n\t\tstyle: {\n\t\t\tcolor: ! textColor?.slug && textColor?.color,\n\t\t\tbackgroundColor: ! backgroundColor?.slug && backgroundColor?.color,\n\t\t},\n\t} );\n\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId\n\t);\n\n\tconst placeholder = useMemo( () => <PlaceholderPreview />, [] );\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tclassName: 'wp-block-navigation__container',\n\t\t},\n\t\t{\n\t\t\tallowedBlocks: ALLOWED_BLOCKS,\n\t\t\torientation: attributes.orientation || 'horizontal',\n\t\t\trenderAppender:\n\t\t\t\t( isImmediateParentOfSelectedBlock &&\n\t\t\t\t\t! selectedBlockHasDescendants ) ||\n\t\t\t\tisSelected\n\t\t\t\t\t? InnerBlocks.DefaultAppender\n\t\t\t\t\t: false,\n\t\t\t__experimentalCaptureToolbars: true,\n\t\t\t// Template lock set to false here so that the Nav\n\t\t\t// Block on the experimental menus screen does not\n\t\t\t// inherit templateLock={ 'all' }.\n\t\t\ttemplateLock: false,\n\t\t\t__experimentalLayout: LAYOUT,\n\t\t\tplaceholder,\n\t\t}\n\t);\n\n\t// Turn on contrast checker for web only since it's not supported on mobile yet.\n\tconst enableContrastChecking = Platform.OS === 'web';\n\n\tconst [ detectedBackgroundColor, setDetectedBackgroundColor ] = useState();\n\tconst [ detectedColor, setDetectedColor ] = useState();\n\tconst [\n\t\tdetectedOverlayBackgroundColor,\n\t\tsetDetectedOverlayBackgroundColor,\n\t] = useState();\n\tconst [ detectedOverlayColor, setDetectedOverlayColor ] = useState();\n\n\tuseEffect( () => {\n\t\tif ( ! enableContrastChecking ) {\n\t\t\treturn;\n\t\t}\n\t\tdetectColors(\n\t\t\tnavRef.current,\n\t\t\tsetDetectedColor,\n\t\t\tsetDetectedBackgroundColor\n\t\t);\n\t\tconst subMenuElement = navRef.current.querySelector(\n\t\t\t'[data-type=\"core/navigation-link\"] [data-type=\"core/navigation-link\"]'\n\t\t);\n\t\tif ( subMenuElement ) {\n\t\t\tdetectColors(\n\t\t\t\tsubMenuElement,\n\t\t\t\tsetDetectedOverlayColor,\n\t\t\t\tsetDetectedOverlayBackgroundColor\n\t\t\t);\n\t\t}\n\t} );\n\n\tif ( isPlaceholderShown ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<NavigationPlaceholder\n\t\t\t\t\tonCreate={ ( blocks, selectNavigationBlock ) => {\n\t\t\t\t\t\tsetIsPlaceholderShown( false );\n\t\t\t\t\t\tupdateInnerBlocks( blocks );\n\t\t\t\t\t\tif ( selectNavigationBlock ) {\n\t\t\t\t\t\t\tselectBlock( clientId );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst justifyAllowedControls =\n\t\tattributes.orientation === 'vertical'\n\t\t\t? [ 'left', 'center', 'right' ]\n\t\t\t: [ 'left', 'center', 'right', 'space-between' ];\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t{ hasItemJustificationControls && (\n\t\t\t\t\t<JustifyToolbar\n\t\t\t\t\t\tvalue={ attributes.itemsJustification }\n\t\t\t\t\t\tallowedControls={ justifyAllowedControls }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { itemsJustification: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\tposition: 'bottom right',\n\t\t\t\t\t\t\tisAlternate: true,\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t{ navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t{ hasSubmenuIndicatorSetting && (\n\t\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tshowSubmenuIcon: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Show submenu indicator icons' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tchecked={ attributes.isResponsive }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tisResponsive: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Enable responsive menu' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t) }\n\t\t\t\t{ hasColorSettings && (\n\t\t\t\t\t<PanelColorSettings\n\t\t\t\t\t\ttitle={ __( 'Color' ) }\n\t\t\t\t\t\tinitialOpen={ false }\n\t\t\t\t\t\tcolorSettings={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: textColor.color,\n\t\t\t\t\t\t\t\tonChange: setTextColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: backgroundColor.color,\n\t\t\t\t\t\t\t\tonChange: setBackgroundColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Background' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: overlayTextColor.color,\n\t\t\t\t\t\t\t\tonChange: setOverlayTextColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Overlay text' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: overlayBackgroundColor.color,\n\t\t\t\t\t\t\t\tonChange: setOverlayBackgroundColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Overlay background' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ enableContrastChecking && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t\tbackgroundColor={ detectedBackgroundColor }\n\t\t\t\t\t\t\t\t\ttextColor={ detectedColor }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t\tbackgroundColor={\n\t\t\t\t\t\t\t\t\t\tdetectedOverlayBackgroundColor\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttextColor={ detectedOverlayColor }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</PanelColorSettings>\n\t\t\t\t) }\n\t\t\t</InspectorControls>\n\t\t\t<nav { ...blockProps }>\n\t\t\t\t<ResponsiveWrapper\n\t\t\t\t\tid={ clientId }\n\t\t\t\t\tonToggle={ setResponsiveMenuVisibility }\n\t\t\t\t\tisOpen={ isResponsiveMenuOpen }\n\t\t\t\t\tisResponsive={ attributes.isResponsive }\n\t\t\t\t>\n\t\t\t\t\t<div { ...innerBlocksProps }></div>\n\t\t\t\t</ResponsiveWrapper>\n\t\t\t</nav>\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( blockEditorStore ).getBlocks( clientId );\n\t\tconst {\n\t\t\tgetClientIdsOfDescendants,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetSelectedBlockClientId,\n\t\t} = select( blockEditorStore );\n\t\tconst isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tfalse\n\t\t);\n\t\tconst selectedBlockId = getSelectedBlockClientId();\n\t\tconst selectedBlockHasDescendants = !! getClientIdsOfDescendants( [\n\t\t\tselectedBlockId,\n\t\t] )?.length;\n\n\t\treturn {\n\t\t\tisImmediateParentOfSelectedBlock,\n\t\t\tselectedBlockHasDescendants,\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\n\t\t\t// This prop is already available but computing it here ensures it's\n\t\t\t// fresh compared to isImmediateParentOfSelectedBlock\n\t\t\tisSelected: selectedBlockId === clientId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateInnerBlocks( blocks ) {\n\t\t\t\tif ( blocks?.length === 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tdispatch( blockEditorStore ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n\twithColors(\n\t\t{ textColor: 'color' },\n\t\t{ backgroundColor: 'color' },\n\t\t{ overlayBackgroundColor: 'color' },\n\t\t{ overlayTextColor: 'color' }\n\t),\n] )( Navigation );\n"]}