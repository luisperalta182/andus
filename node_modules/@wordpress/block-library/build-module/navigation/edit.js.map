{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["classnames","useState","useEffect","useMemo","useRef","Platform","InnerBlocks","__experimentalUseInnerBlocksProps","useInnerBlocksProps","InspectorControls","JustifyToolbar","BlockControls","useBlockProps","store","blockEditorStore","withColors","PanelColorSettings","ContrastChecker","getColorClassName","useDispatch","withSelect","withDispatch","PanelBody","ToggleControl","ToolbarGroup","compose","__","useBlockNavigator","NavigationPlaceholder","PlaceholderPreview","ResponsiveWrapper","ALLOWED_BLOCKS","LAYOUT","type","alignments","getComputedStyle","node","ownerDocument","defaultView","detectColors","colorsDetectionElement","setColor","setBackground","color","backgroundColorNode","backgroundColor","parentNode","nodeType","ELEMENT_NODE","Navigation","selectedBlockHasDescendants","attributes","setAttributes","clientId","hasExistingNavItems","isImmediateParentOfSelectedBlock","isSelected","updateInnerBlocks","className","setBackgroundColor","textColor","setTextColor","overlayBackgroundColor","setOverlayBackgroundColor","overlayTextColor","setOverlayTextColor","hasSubmenuIndicatorSetting","hasItemJustificationControls","hasColorSettings","isPlaceholderShown","setIsPlaceholderShown","isResponsiveMenuOpen","setResponsiveMenuVisibility","selectBlock","navRef","blockProps","ref","itemsJustification","orientation","isResponsive","class","slug","style","navigatorToolbarButton","navigatorModal","placeholder","innerBlocksProps","allowedBlocks","renderAppender","DefaultAppender","__experimentalCaptureToolbars","templateLock","__experimentalLayout","enableContrastChecking","OS","detectedBackgroundColor","setDetectedBackgroundColor","detectedColor","setDetectedColor","detectedOverlayBackgroundColor","setDetectedOverlayBackgroundColor","detectedOverlayColor","setDetectedOverlayColor","current","subMenuElement","querySelector","blocks","selectNavigationBlock","justifyAllowedControls","value","position","isAlternate","showSubmenuIcon","onChange","label","select","innerBlocks","getBlocks","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","selectedBlockId","length","dispatch","replaceInnerBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tPlatform,\n} from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\t__experimentalUseInnerBlocksProps as useInnerBlocksProps,\n\tInspectorControls,\n\tJustifyToolbar,\n\tBlockControls,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n\twithColors,\n\tPanelColorSettings,\n\tContrastChecker,\n\tgetColorClassName,\n} from '@wordpress/block-editor';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport { PanelBody, ToggleControl, ToolbarGroup } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\nimport NavigationPlaceholder from './placeholder';\nimport PlaceholderPreview from './placeholder-preview';\nimport ResponsiveWrapper from './responsive-wrapper';\n\nconst ALLOWED_BLOCKS = [\n\t'core/navigation-link',\n\t'core/search',\n\t'core/social-links',\n\t'core/page-list',\n\t'core/spacer',\n\t'core/home-link',\n];\n\nconst LAYOUT = {\n\ttype: 'default',\n\talignments: [],\n};\n\nfunction getComputedStyle( node ) {\n\treturn node.ownerDocument.defaultView.getComputedStyle( node );\n}\n\nfunction detectColors( colorsDetectionElement, setColor, setBackground ) {\n\tif ( ! colorsDetectionElement ) {\n\t\treturn;\n\t}\n\tsetColor( getComputedStyle( colorsDetectionElement ).color );\n\n\tlet backgroundColorNode = colorsDetectionElement;\n\tlet backgroundColor = getComputedStyle( backgroundColorNode )\n\t\t.backgroundColor;\n\twhile (\n\t\tbackgroundColor === 'rgba(0, 0, 0, 0)' &&\n\t\tbackgroundColorNode.parentNode &&\n\t\tbackgroundColorNode.parentNode.nodeType ===\n\t\t\tbackgroundColorNode.parentNode.ELEMENT_NODE\n\t) {\n\t\tbackgroundColorNode = backgroundColorNode.parentNode;\n\t\tbackgroundColor = getComputedStyle( backgroundColorNode )\n\t\t\t.backgroundColor;\n\t}\n\n\tsetBackground( backgroundColor );\n}\n\nfunction Navigation( {\n\tselectedBlockHasDescendants,\n\tattributes,\n\tsetAttributes,\n\tclientId,\n\thasExistingNavItems,\n\tisImmediateParentOfSelectedBlock,\n\tisSelected,\n\tupdateInnerBlocks,\n\tclassName,\n\tbackgroundColor,\n\tsetBackgroundColor,\n\ttextColor,\n\tsetTextColor,\n\toverlayBackgroundColor,\n\tsetOverlayBackgroundColor,\n\toverlayTextColor,\n\tsetOverlayTextColor,\n\thasSubmenuIndicatorSetting = true,\n\thasItemJustificationControls = true,\n\thasColorSettings = true,\n} ) {\n\tconst [ isPlaceholderShown, setIsPlaceholderShown ] = useState(\n\t\t! hasExistingNavItems\n\t);\n\tconst [ isResponsiveMenuOpen, setResponsiveMenuVisibility ] = useState(\n\t\tfalse\n\t);\n\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\tconst navRef = useRef();\n\n\tconst blockProps = useBlockProps( {\n\t\tref: navRef,\n\t\tclassName: classnames( className, {\n\t\t\t[ `items-justified-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t\t'is-vertical': attributes.orientation === 'vertical',\n\t\t\t'is-responsive': attributes.isResponsive,\n\t\t\t'has-text-color': !! textColor.color || !! textColor?.class,\n\t\t\t[ getColorClassName(\n\t\t\t\t'color',\n\t\t\t\ttextColor?.slug\n\t\t\t) ]: !! textColor?.slug,\n\t\t\t'has-background': !! backgroundColor.color || backgroundColor.class,\n\t\t\t[ getColorClassName(\n\t\t\t\t'background-color',\n\t\t\t\tbackgroundColor?.slug\n\t\t\t) ]: !! backgroundColor?.slug,\n\t\t} ),\n\t\tstyle: {\n\t\t\tcolor: ! textColor?.slug && textColor?.color,\n\t\t\tbackgroundColor: ! backgroundColor?.slug && backgroundColor?.color,\n\t\t},\n\t} );\n\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId\n\t);\n\n\tconst placeholder = useMemo( () => <PlaceholderPreview />, [] );\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tclassName: 'wp-block-navigation__container',\n\t\t},\n\t\t{\n\t\t\tallowedBlocks: ALLOWED_BLOCKS,\n\t\t\torientation: attributes.orientation || 'horizontal',\n\t\t\trenderAppender:\n\t\t\t\t( isImmediateParentOfSelectedBlock &&\n\t\t\t\t\t! selectedBlockHasDescendants ) ||\n\t\t\t\tisSelected\n\t\t\t\t\t? InnerBlocks.DefaultAppender\n\t\t\t\t\t: false,\n\t\t\t__experimentalCaptureToolbars: true,\n\t\t\t// Template lock set to false here so that the Nav\n\t\t\t// Block on the experimental menus screen does not\n\t\t\t// inherit templateLock={ 'all' }.\n\t\t\ttemplateLock: false,\n\t\t\t__experimentalLayout: LAYOUT,\n\t\t\tplaceholder,\n\t\t}\n\t);\n\n\t// Turn on contrast checker for web only since it's not supported on mobile yet.\n\tconst enableContrastChecking = Platform.OS === 'web';\n\n\tconst [ detectedBackgroundColor, setDetectedBackgroundColor ] = useState();\n\tconst [ detectedColor, setDetectedColor ] = useState();\n\tconst [\n\t\tdetectedOverlayBackgroundColor,\n\t\tsetDetectedOverlayBackgroundColor,\n\t] = useState();\n\tconst [ detectedOverlayColor, setDetectedOverlayColor ] = useState();\n\n\tuseEffect( () => {\n\t\tif ( ! enableContrastChecking ) {\n\t\t\treturn;\n\t\t}\n\t\tdetectColors(\n\t\t\tnavRef.current,\n\t\t\tsetDetectedColor,\n\t\t\tsetDetectedBackgroundColor\n\t\t);\n\t\tconst subMenuElement = navRef.current.querySelector(\n\t\t\t'[data-type=\"core/navigation-link\"] [data-type=\"core/navigation-link\"]'\n\t\t);\n\t\tif ( subMenuElement ) {\n\t\t\tdetectColors(\n\t\t\t\tsubMenuElement,\n\t\t\t\tsetDetectedOverlayColor,\n\t\t\t\tsetDetectedOverlayBackgroundColor\n\t\t\t);\n\t\t}\n\t} );\n\n\tif ( isPlaceholderShown ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<NavigationPlaceholder\n\t\t\t\t\tonCreate={ ( blocks, selectNavigationBlock ) => {\n\t\t\t\t\t\tsetIsPlaceholderShown( false );\n\t\t\t\t\t\tupdateInnerBlocks( blocks );\n\t\t\t\t\t\tif ( selectNavigationBlock ) {\n\t\t\t\t\t\t\tselectBlock( clientId );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst justifyAllowedControls =\n\t\tattributes.orientation === 'vertical'\n\t\t\t? [ 'left', 'center', 'right' ]\n\t\t\t: [ 'left', 'center', 'right', 'space-between' ];\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t{ hasItemJustificationControls && (\n\t\t\t\t\t<JustifyToolbar\n\t\t\t\t\t\tvalue={ attributes.itemsJustification }\n\t\t\t\t\t\tallowedControls={ justifyAllowedControls }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { itemsJustification: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\tposition: 'bottom right',\n\t\t\t\t\t\t\tisAlternate: true,\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t{ navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t{ hasSubmenuIndicatorSetting && (\n\t\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tshowSubmenuIcon: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Show submenu indicator icons' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tchecked={ attributes.isResponsive }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tisResponsive: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Enable responsive menu' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t) }\n\t\t\t\t{ hasColorSettings && (\n\t\t\t\t\t<PanelColorSettings\n\t\t\t\t\t\ttitle={ __( 'Color' ) }\n\t\t\t\t\t\tinitialOpen={ false }\n\t\t\t\t\t\tcolorSettings={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: textColor.color,\n\t\t\t\t\t\t\t\tonChange: setTextColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: backgroundColor.color,\n\t\t\t\t\t\t\t\tonChange: setBackgroundColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Background' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: overlayTextColor.color,\n\t\t\t\t\t\t\t\tonChange: setOverlayTextColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Overlay text' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: overlayBackgroundColor.color,\n\t\t\t\t\t\t\t\tonChange: setOverlayBackgroundColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Overlay background' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ enableContrastChecking && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t\tbackgroundColor={ detectedBackgroundColor }\n\t\t\t\t\t\t\t\t\ttextColor={ detectedColor }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t\tbackgroundColor={\n\t\t\t\t\t\t\t\t\t\tdetectedOverlayBackgroundColor\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttextColor={ detectedOverlayColor }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</PanelColorSettings>\n\t\t\t\t) }\n\t\t\t</InspectorControls>\n\t\t\t<nav { ...blockProps }>\n\t\t\t\t<ResponsiveWrapper\n\t\t\t\t\tid={ clientId }\n\t\t\t\t\tonToggle={ setResponsiveMenuVisibility }\n\t\t\t\t\tisOpen={ isResponsiveMenuOpen }\n\t\t\t\t\tisResponsive={ attributes.isResponsive }\n\t\t\t\t>\n\t\t\t\t\t<div { ...innerBlocksProps }></div>\n\t\t\t\t</ResponsiveWrapper>\n\t\t\t</nav>\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( blockEditorStore ).getBlocks( clientId );\n\t\tconst {\n\t\t\tgetClientIdsOfDescendants,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetSelectedBlockClientId,\n\t\t} = select( blockEditorStore );\n\t\tconst isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tfalse\n\t\t);\n\t\tconst selectedBlockId = getSelectedBlockClientId();\n\t\tconst selectedBlockHasDescendants = !! getClientIdsOfDescendants( [\n\t\t\tselectedBlockId,\n\t\t] )?.length;\n\n\t\treturn {\n\t\t\tisImmediateParentOfSelectedBlock,\n\t\t\tselectedBlockHasDescendants,\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\n\t\t\t// This prop is already available but computing it here ensures it's\n\t\t\t// fresh compared to isImmediateParentOfSelectedBlock\n\t\t\tisSelected: selectedBlockId === clientId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateInnerBlocks( blocks ) {\n\t\t\t\tif ( blocks?.length === 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tdispatch( blockEditorStore ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n\twithColors(\n\t\t{ textColor: 'color' },\n\t\t{ backgroundColor: 'color' },\n\t\t{ overlayBackgroundColor: 'color' },\n\t\t{ overlayTextColor: 'color' }\n\t),\n] )( Navigation );\n"]}